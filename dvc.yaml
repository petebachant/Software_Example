stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
    - requirements.txt
    outs:
    - .calkit/env-locks/main.txt:
        cache: false
        persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be 
      overwritten.
  _check-env-nb:
    cmd: calkit check environment --name nb
    deps:
    - requirements-nb.txt
    outs:
    - .calkit/env-locks/nb.txt:
        cache: false
        persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be 
      overwritten.
  run:
    cmd: calkit xenv -n main --no-check -- python run.py
    deps:
    - run.py
    - model.py
    - .calkit/env-locks/main.txt
    outs:
    - two-dim/data
    - two-dim/snapshots
    desc: Automatically generated from the 'run' stage in calkit.yaml. Changes 
      made here will be overwritten.
  post-process:
    cmd: calkit xenv -n main --no-check -- python postprocess.py
    deps:
    - postprocess.py
    - model.py
    - analysis_utils.py
    - plotting_utils.py
    - plots.mplstyle
    - .calkit/env-locks/main.txt
    - two-dim/data
    - two-dim/snapshots
    outs:
    - two-dim/analysis
    desc: Automatically generated from the 'post-process' stage in calkit.yaml. 
      Changes made here will be overwritten.
  _clean-nb-run-notebook:
    cmd: calkit nb clean "example.ipynb"
    deps:
    - example.ipynb
    outs:
    - .calkit/notebooks/cleaned/example.ipynb:
        cache: false
    desc: Automatically generated from the 'run-notebook' stage in calkit.yaml. 
      Changes made here will be overwritten.
  run-notebook:
    cmd: calkit nb execute --environment nb --no-check --to html "example.ipynb"
    deps:
    - .calkit/notebooks/cleaned/example.ipynb
    - model.py
    - .calkit/env-locks/nb.txt
    outs:
    - .calkit/notebooks/executed/example.ipynb:
        cache: false
    - .calkit/notebooks/html/example.html:
        cache: false
    desc: Automatically generated from the 'run-notebook' stage in calkit.yaml. 
      Changes made here will be overwritten.
  run-sim-nb:
    cmd: calkit xenv -n nb -- python 
      ".calkit/notebook-stages/run-sim-nb/script.py"
    deps:
    - .calkit/notebook-stages/run-sim-nb/script.py
    - model.py
    outs:
    - .calkit/notebook-stages/run-sim-nb/outs/m.pickle
    - two-dim-nb
