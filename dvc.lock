schema: '2.0'
stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
    - path: requirements.txt
      hash: md5
      md5: 82abbee06642a7390ea04a88b634d25c
      size: 150
    outs:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: b9c363d71acbfdab69715b26758838c8
      size: 697
  run:
    cmd: calkit xenv -n main --no-check -- python run.py
    deps:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: b9c363d71acbfdab69715b26758838c8
      size: 697
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    - path: run.py
      hash: md5
      md5: 26643454ddb33a88c4edf73ff2fdbbe1
      size: 915
    outs:
    - path: two-dim/data
      hash: md5
      md5: 37c54a6dc8e3ea73e34b36721a97d38d.dir
      size: 204004
      nfiles: 1
    - path: two-dim/snapshots
      hash: md5
      md5: 898f202bc2df0dc7543647a42fb36584.dir
      size: 30851
      nfiles: 2
  post-process:
    cmd: calkit xenv -n main --no-check -- python postprocess.py
    deps:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: b9c363d71acbfdab69715b26758838c8
      size: 697
    - path: analysis_utils.py
      hash: md5
      md5: 82be04856bdf017c4ee9c8bc5789afbd
      size: 5010
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    - path: plots.mplstyle
      hash: md5
      md5: 17ad5c2a561e2ab40a3c3ae96a8017ea
      size: 1322
    - path: plotting_utils.py
      hash: md5
      md5: dbaf22a0d47f64e521121f461eb06654
      size: 3435
    - path: postprocess.py
      hash: md5
      md5: 489948e2e3abc318c9c925dd07cec6d2
      size: 1996
    - path: two-dim/data
      hash: md5
      md5: 37c54a6dc8e3ea73e34b36721a97d38d.dir
      size: 204004
      nfiles: 1
    outs:
    - path: two-dim/analysis
      hash: md5
      md5: 8fc96bfc7ee3af6b85ebfb1afe6eb412.dir
      size: 500720
      nfiles: 6
  run-nb-sim:
    cmd: calkit xenv -n nb -- python 
      ".calkit/notebook-stages/run-nb-sim/script.py"
    deps:
    - path: .calkit/notebook-stages/run-nb-sim/script.py
      hash: md5
      md5: 94fe823d11445964e5e9bb5b6064dc3f
      size: 771
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    outs:
    - path: .calkit/notebook-stages/run-nb-sim/outs/m.pickle
      hash: md5
      md5: ce5fbd3ee9596d3822a3fdfde84fad95
      size: 204004
    - path: two-dim-nb
      hash: md5
      md5: 756e4a743efc619cec3ea1c77c4c7590.dir
      size: 234770
      nfiles: 3
  _check-env-nb:
    cmd: calkit check environment --name nb
    deps:
    - path: reqs-nb.txt
      hash: md5
      md5: 028679b68edc2fa840ba7650487edcce
      size: 173
    outs:
    - path: .calkit/env-locks/nb.txt
      hash: md5
      md5: 48a3390da3b9664ad61b85cd43e99e64
      size: 3766
  _clean-nb-run-nb:
    cmd: calkit nb clean "example.ipynb"
    deps:
    - path: example.ipynb
      hash: md5
      md5: 6ba0650c4e4da049b61b41ec5ed2c586
      size: 168941
    outs:
    - path: .calkit/notebooks/cleaned/example.ipynb
      hash: md5
      md5: b3c079adeb98df6962831fa6961f75fc
      size: 8291
  run-nb:
    cmd: calkit nb execute --environment nb --no-check --to html "example.ipynb"
    deps:
    - path: .calkit/env-locks/nb.txt
      hash: md5
      md5: 48a3390da3b9664ad61b85cd43e99e64
      size: 3766
    - path: .calkit/notebooks/cleaned/example.ipynb
      hash: md5
      md5: b3c079adeb98df6962831fa6961f75fc
      size: 8291
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    outs:
    - path: .calkit/notebooks/executed/example.ipynb
      hash: md5
      md5: 016fb982da5f5b760e97acf1eb109118
      size: 510678
    - path: .calkit/notebooks/html/example.html
      hash: md5
      md5: 2a2ff92fe3599d21fcb81db55ae6eb1d
      size: 814270
