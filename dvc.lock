schema: '2.0'
stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
    - path: requirements.txt
      hash: md5
      md5: 82abbee06642a7390ea04a88b634d25c
      size: 150
    outs:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: c13ae3b69fb5805000cb9253d0363a3c
      size: 697
  plot:
    cmd: calkit xenv -n main --no-check -- python run.py
    deps:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: c13ae3b69fb5805000cb9253d0363a3c
      size: 697
    - path: run.py
      hash: md5
      md5: b63f09db19f1a4a7b49780e0ed3865b2
      size: 917
  run:
    cmd: calkit xenv -n main --no-check -- python run.py
    deps:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: c13ae3b69fb5805000cb9253d0363a3c
      size: 697
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    - path: run.py
      hash: md5
      md5: b63f09db19f1a4a7b49780e0ed3865b2
      size: 917
    outs:
    - path: two-dim/data
      hash: md5
      md5: aa280166253ad3795eec9e5fa1a27d1c.dir
      size: 81601600
      nfiles: 400
    - path: two-dim/snapshots
      hash: md5
      md5: fdac5283cbb7dfe7e8ddacf2a34bd142.dir
      size: 10205211
      nfiles: 401
  post-process:
    cmd: calkit xenv -n main --no-check -- python postprocess.py
    deps:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: c13ae3b69fb5805000cb9253d0363a3c
      size: 697
    - path: analysis_utils.py
      hash: md5
      md5: 82be04856bdf017c4ee9c8bc5789afbd
      size: 5010
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    - path: plots.mplstyle
      hash: md5
      md5: 17ad5c2a561e2ab40a3c3ae96a8017ea
      size: 1322
    - path: plotting_utils.py
      hash: md5
      md5: dbaf22a0d47f64e521121f461eb06654
      size: 3435
    - path: postprocess.py
      hash: md5
      md5: 489948e2e3abc318c9c925dd07cec6d2
      size: 1996
    - path: two-dim/data
      hash: md5
      md5: aa280166253ad3795eec9e5fa1a27d1c.dir
      size: 81601600
      nfiles: 400
    - path: two-dim/snapshots
      hash: md5
      md5: fdac5283cbb7dfe7e8ddacf2a34bd142.dir
      size: 10205211
      nfiles: 401
    outs:
    - path: two-dim/analysis
      hash: md5
      md5: 6e8afd4c5178237e73daf0fc30fb5753.dir
      size: 167884220
      nfiles: 2400
  _clean-nb-run-notebook:
    cmd: calkit nb clean "example.ipynb"
    deps:
    - path: example.ipynb
      hash: md5
      md5: f782c8f22a65d3ecde70351faa057812
      size: 489746
    outs:
    - path: .calkit/notebooks/cleaned/example.ipynb
      hash: md5
      md5: f810da7fd7408e6b94004f14fc78d1ec
      size: 7188
  _check-env-nb:
    cmd: calkit check environment --name nb
    deps:
    - path: requirements-nb.txt
      hash: md5
      md5: 4729ef3732347ce8ad183a5b73d96137
      size: 90
    outs:
    - path: .calkit/env-locks/nb.txt
      hash: md5
      md5: 45530589ff78fee20c3f0bf2a2a04e40
      size: 2038
  run-notebook:
    cmd: calkit nb execute --environment nb --no-check --to html "example.ipynb"
    deps:
    - path: .calkit/env-locks/nb.txt
      hash: md5
      md5: 45530589ff78fee20c3f0bf2a2a04e40
      size: 2038
    - path: .calkit/notebooks/cleaned/example.ipynb
      hash: md5
      md5: f810da7fd7408e6b94004f14fc78d1ec
      size: 7188
    - path: model.py
      hash: md5
      md5: 33e480dd5d40b3cf20089da48324f028
      size: 22161
    outs:
    - path: .calkit/notebooks/executed/example.ipynb
      hash: md5
      md5: 83b8746382cd2df4392207ce828131f0
      size: 504564
    - path: .calkit/notebooks/html/example.html
      hash: md5
      md5: 03ffb2710b49df99c53430dc4f20dfb9
      size: 813001
    - path: two-dim-nb
      hash: md5
      md5: 920db499c15dbde008d6eb92359ba23a.dir
      size: 458818
      nfiles: 5
